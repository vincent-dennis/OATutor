FROM node:22-alpine

WORKDIR /app

# Copy dependency manifests first (enables caching)
COPY package*.json ./

# Install dependencies
RUN npm ci

# Copy the rest of the project
COPY . .

# React dev server uses 3001
EXPOSE 3001

# Backend server uses 4000
EXPOSE 4000

CMD ["npm", "run", "dev"]
